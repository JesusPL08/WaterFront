<div class="modal-content p-4">
  <h4 class="mb-4">{{ isEditMode ? 'Editar Usuario' : 'Crear Usuario' }}</h4>
  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="form-grid">

      <div class="form-field">
        <app-form-field
          label="Nombre"
          [control]="getSafeControl('name')"
          type="text">
        </app-form-field>
      </div>

      <div class="form-field">
        <app-form-field
          label="Teléfono"
          [control]="getSafeControl('phoneNumber')"
          type="text">
        </app-form-field>
      </div>

      <div class="form-field">
        <app-form-field
          label="RFC"
          [control]="getSafeControl('rfc')"
          type="text">
        </app-form-field>
      </div>

      <div class="form-field">
        <app-form-field
          label="Perfil"
          [control]="getSafeControl('profileId')"
          type="select"
          [options]="profileOptions"
          placeholder="Selecciona un perfil">
        </app-form-field>
      </div>

      <div class="form-field">
        <app-form-field
          label="Sueldo"
          [control]="getSafeControl('salaryId')"
          type="select"
          [options]="salaryOptions"
          placeholder="Selecciona un sueldo">
        </app-form-field>
      </div>

      <div class="form-field">
        <app-form-field
          label="Fecha de Contratación"
          [control]="getSafeControl('hiringDate')"
          type="date">
        </app-form-field>
      </div>

      <div class="form-field">
        <app-form-field
          label="Sucursal"
          [control]="getSafeControl('branchId')"
          type="select"
          [options]="branchOptions"
          placeholder="No asignada">
        </app-form-field>
      </div>

      <div class="form-field">
        <app-form-field
          label="Área"
          [control]="getSafeControl('areaId')"
          type="select"
          [options]="AreaOptions"
          placeholder="No asignada">
        </app-form-field>
      </div>

      <div class="form-field" style="grid-column: 1 / -1;">
        <label for="crearLoginSwitch" style="margin-bottom: 0.5rem;">¿Desea crear login?</label>
        <label class="switch">
          <input
            type="checkbox"
            [(ngModel)]="crearLogin"
            (ngModelChange)="actualizarValidadoresLogin()"
            [ngModelOptions]="{ standalone: true }"
            [disabled]="isEditMode && tieneLogin"
            name="crearLoginSwitch"
            id="crearLoginSwitch">
          <span class="slider round"></span>
        </label>
      </div>

      <div class="form-field" *ngIf="crearLogin">
        <app-form-field
          label="Usuario"
          [control]="getSafeControl('user')"
          type="text"
          [readonly]="isEditMode">
        </app-form-field>
      </div>

      <div class="form-field" *ngIf="crearLogin">
        <app-form-field
          label="Contraseña"
          [control]="getSafeControl('password')"
          type="password">
        </app-form-field>
      </div>

      <div class="form-actions">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="form.invalid">
          Guardar
        </button>
      </div>

    </div>
  </form>
</div>
